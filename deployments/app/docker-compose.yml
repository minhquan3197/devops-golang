version: "3"
services:
  project_main: # Nginx
    container_name: docker_main
    build: ../nginx/
    volumes:
      - ../nginx:/etc/nginx/conf.d/
      - ../..:/projects
    ports:
      - "80:80"
    links:
      - "project_golang"
    restart: always
  project_golang: # Golang
    container_name: docker_golang
    volumes:
      - ../..:/projects
    build:
      context: ../../
      dockerfile: Dockerfile
    restart: always
    links:
        - "project_mongo"
  project_mongo:
    image: mongo
    container_name: "docker_mongodb"
    ports:
      - "27017:27017"
    environment:
      - MONGO_INITDB_ROOT_USERNAME=test
      - MONGO_INITDB_ROOT_PASSWORD=pass
